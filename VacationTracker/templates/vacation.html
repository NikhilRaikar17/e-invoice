{% extends 'base.html' %}

{% block breadcrumb %}
  <li class="breadcrumb-item active">{% block title %}{% if scope == 'my' %}My{% else %}All{% endif %} Vacation Dates{% endblock %}</li>
{% endblock %}

{% block content %}
  <h1>Submitted Vacation Dates</h1>
  <hr/>

  <!-- Vacation dates table upper toolbar -->
  <div class="btn-toolbar mb-3">
    <button class="open-selection-delete-dialog btn btn-danger mr-2" data-toggle="modal" data-title="DeleteSelected" data-target="#delete-vacations">
      <i class="fa fa-trash-alt"></i> Delete
    </button>
    <button class="btn btn-success mr-2" data-toggle="modal" data-title="Add" data-target="#add-vacation">
      <i class="fa fa-plus-circle"></i> Add
    </button>
    <div class="input-group">
      <span class="input-group-text">
        <i class="fa fa-filter"></i>
      </span>
      <input type="text" class="form-control" id="vacation-table-filter" placeholder="Filter"></input>
    </div>
  </div>
  
  <!-- Vacation dates table -->
  <div class="table-responsive">
    <table class="table table-striped">
      <thead>
        <tr>
          <th><input type="checkbox" class="check" id="checkall"/></th>
          {% if scope == 'all' %}
          <th>Email</th>
          {% endif %}
          <th>From</th>
          <th>To</th>
          <th>Edit</th>
          <th>Delete</th>
        </tr>
      </thead>
      <tbody id="vacation-table-body">
      {% for vacation in vacations %}
        <tr>
          <td><input type="checkbox" class="vacation-checkbox check" id="{{ vacation.id }}"/></td>
          {% if scope == 'all' %}
          <td>{{ vacation.Mail }}</td>
          {% endif %}
          <td>{{ vacation.StartDate.strftime('%B %d, %Y').replace(" 0", " ") }}</td>
          <td>{{ vacation.EndDate.strftime('%B %d, %Y').replace(" 0", " ") }}</td>
          <td>
            <button class="open-edit-dialog btn btn-primary btn-sm" data-id="{{ vacation.id }}" data-email="{{ vacation.Mail }}" data-start-date="{{ vacation.StartDate }}" data-end-date="{{ vacation.EndDate }}" data-title="Edit" data-toggle="modal" data-target="#edit-vacation">
              <li class="fa fa-edit"></li>
            </button>
          </td>
          <td>
            <button class="open-delete-dialog btn btn-danger btn-sm" data-id="{{ vacation.id }}" data-title="Delete" data-toggle="modal" data-target="#delete-vacation">
              <li class="fa fa-trash-alt"></li>
            </button>
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>

    
  <!-- Modal edit vacation date dialog -->
  <div class="modal fade" id="edit-vacation" tabindex="-1">
    <div class="modal-dialog">
      <form id="edit-vacation-form" action="{{ url_for('vacation_update', scope = scope) }}" method="POST">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="Heading">Edit Vacation Date</h4>
            <button type="button" class="close" data-dismiss="modal">
              <span>×</span>
            </button>
          </div>
          <div class="modal-body">
            <input type="hidden" id="edit-vacation-id" name="edit-vacation-id" value=""></input>
            {% if scope == 'all' %}
            <div class="form-group">
              <label for="edit-email"><b>Email</b></label>
              <input class="form-control" id="edit-email" name="edit-email" value="" required></input>
            </div>
            {% endif %}
            <div class="form-group">
              <label for="edit-start-date"><b>From</b></label>
              <input class="form-control" id="edit-start-date" name="edit-start-date" value="" data-date-format="yyyy-mm-dd" data-date-autoclose="true" data-date-calendar-weeks="true" required></input>
            </div>
            <div class="form-group">
              <label for="edit-end-date"><b>To</b></label>
              <input class="form-control" id="edit-end-date" name="edit-end-date" value="" data-date-format="yyyy-mm-dd" data-date-autoclose="true" data-date-calendar-weeks="true" required></input>
            </div>
          </div>
          <div class="modal-footer ">
            <button class="btn btn-success btn-lg" style="width: 100%;">
              <i class="fa fa-save"></i> Update
            </button>
          </div>
        </div>
      </form>        
    </div>
  </div>
    
  <!-- Modal delete vacation date dialog -->
  <div class="modal fade" id="delete-vacation" tabindex="-1">
    <div class="modal-dialog">
      <form id="delete-vacation-form" action="{{ url_for('vacation_delete', scope = scope) }}" method="POST">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="Heading">Delete Vacation Date</h4>
            <button type="button" class="close" data-dismiss="modal">
              <span>×</span>
            </button>
          </div>
          <div class="modal-body">
            <input type="hidden" id="delete-vacation-id" name="delete-vacation-id" value=""></input>
            <div class="alert alert-danger">
              <i class="fa fa-exclamation-triangle"></i> &nbsp;Are you sure you want to delete this vacation date?
            </div>
          </div>
          <div class="modal-footer ">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">
              <i class="fa fa-window-close"></i> Cancel
            </button>
            <button class="btn btn-danger">
              <i class="fa fa-save"></i> Delete
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
    


    

  
{% endblock %}

{% block scripts %}

{% endblock %}
